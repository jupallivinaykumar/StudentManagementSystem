<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { padding-top: 56px; background-color: #f0f2f5; } /* Light gray background */
        .navbar { box-shadow: 0 2px 4px rgba(0,0,0,.05); }
        .dashboard-card {
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0,0,0,.08); /* More prominent shadow */
            border-radius: .75rem; /* Slightly more rounded corners */
            overflow: hidden; /* Ensures content stays within rounded corners */
            transition: transform 0.2s ease-in-out; /* Smooth hover effect */
        }
        .dashboard-card:hover {
            transform: translateY(-5px); /* Lift card on hover */
        }
        .card-header-custom {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid rgba(0,0,0,.125);
            background-color: #007bff; /* Primary blue for profile */
            color: white;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .card-header-green {
            background-color: #28a745; /* Success green for overview */
            color: white;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .profile-pic-container {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            overflow: hidden;
            border: 3px solid #fff;
            box-shadow: 0 2px 8px rgba(0,0,0,.1);
            margin-bottom: 15px;
            background-color: #e9ecef; /* Placeholder background */
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .profile-pic-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .info-item {
            padding: 8px 0;
            border-bottom: 1px dashed #e0e0e0;
        }
        .info-item:last-child {
            border-bottom: none;
        }
        .info-item strong {
            color: #343a40;
        }
        .stat-card {
            background-color: #e9f7ef; /* Light green */
            border: 1px solid #c3e6cb;
            border-radius: .5rem;
            padding: 20px;
            text-align: center;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,.05);
            transition: background-color 0.2s;
        }
        .stat-card:hover {
            background-color: #d4edda;
        }
        .stat-card h6 {
            color: #218838;
            margin-bottom: 10px;
        }
        .stat-card h3 {
            color: #28a745;
            font-size: 2.2rem;
            margin-bottom: 0;
        }
        .section-title {
            font-size: 1.8rem;
            color: #343a40;
            margin-bottom: 25px;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="{% url 'student_dashboard' %}">Student Panel</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="{% url 'student_dashboard' %}">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'view_attendance_reports' %}">View Attendance</a> {# Updated Link #}
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'manage_results' %}">View Results</a> {# Updated Link #}
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'apply_leave' %}">Apply for Leave</a> {# Updated Link #}
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'send_feedback' %}">Send Feedback</a> {# Updated Link #}
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="#">Welcome, {{ user.first_name|default:user.username }}</a>
                    </li>
                    <li class="nav-item">
                        <form action="{% url 'logout' %}" method="post" class="d-inline"> {# d-inline for Bootstrap styling #}
                            {% csrf_token %}
                            <button type="submit" class="nav-link btn btn-link text-decoration-none text-light">Logout</button> {# btn-link for appearance #}
                        </form>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-5 pt-4">
        <h1 class="section-title">Welcome, {{ user.first_name|default:user.username }}!</h1>
        <p class="lead mb-4">This is your personalized student dashboard. Here you can view your academic details and manage your requests.</p>

        <div class="row">
            <div class="col-lg-5 col-md-6">
                <div class="card dashboard-card">
                    <div class="card-header-custom bg-primary">
                        <i data-feather="user" class="me-2"></i>
                        <h5>My Profile Information</h5>
                    </div>
                    <div class="card-body text-center">
                        <div class="profile-pic-container mx-auto">
                            {% if user.profile_pic %}
                                <img src="{{ user.profile_pic.url }}" alt="Profile Picture">
                            {% else %}
                                <img src="{{ '/static/default_profile.png' }}" alt="Default Profile">
                            {% endif %}
                        </div>
                        <h4 class="mb-3">{{ user.first_name }} {{ user.last_name }}</h4>
                        <div class="text-start">
                            <div class="info-item"><strong>Username:</strong> {{ user.username }}</div>
                            <div class="info-item"><strong>Email:</strong> {{ user.email }}</div>
                            <div class="info-item"><strong>Gender:</strong> {{ student_profile.gender|default:"N/A" }}</div>
                            <div class="info-item"><strong>Address:</strong> {{ student_profile.address|default:"N/A" }}</div>
                            <div class="info-item"><strong>Date of Birth:</strong> {{ student_profile.date_of_birth|default:"N/A"|date:"F j, Y" }}</div>
                            <div class="info-item"><strong>Current Course:</strong> {{ student_profile.course_id.course_name|default:"N/A" }}</div>
                            <div class="info-item"><strong>Current Session:</strong> {{ student_profile.session_year_id|default:"N/A" }}</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-7 col-md-6">
                <div class="card dashboard-card">
                    <div class="card-header-custom card-header-green">
                        <i data-feather="grid" class="me-2"></i>
                        <h5>Quick Overview</h5>
                    </div>
                    <div class="card-body">
                        <div class="row g-3"> {# Added gutter #}
                            <div class="col-sm-6">
                                <div class="stat-card">
                                    <h6>Attendance Percentage</h6>
                                    <h3>N/A</h3> {# Will be dynamic later #}
                                    <p class="text-muted mb-0">Based on all subjects</p>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="stat-card">
                                    <h6>Last Exam Grade</h6>
                                    <h3>N/A</h3> {# Will be dynamic later #}
                                    <p class="text-muted mb-0">Overall average</p>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="stat-card">
                                    <h6>Pending Leaves</h6>
                                    <h3>N/A</h3> {# Will be dynamic later #}
                                    <p class="text-muted mb-0">Awaiting approval</p>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="stat-card">
                                    <h6>Total Subjects</h6>
                                    <h3>N/A</h3> {# Will be dynamic later #}
                                    <p class="text-muted mb-0">Enrolled this session</p>
                                </div>
                            </div>
                        </div>
                        <p class="text-muted mt-4 text-center">For more detailed information, please use the navigation links above.</p>
                    </div>
                </div>
            </div>
        </div>

        {# Placeholder for Recent Activities / Announcements #}
        <div class="row mt-4">
            <div class="col-12">
                <div class="card dashboard-card">
                    <div class="card-header-custom bg-info">
                        <i data-feather="bell" class="me-2"></i>
                        <h5>Recent Announcements & Updates</h5>
                    </div>
                    <div class="card-body">
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">
                                <small class="text-muted float-end">July 25, 2025</small>
                                <strong>Exam Schedule Update:</strong> Final exams for Java Course have been rescheduled. Check "View Results" for details.
                            </li>
                            <li class="list-group-item">
                                <small class="text-muted float-end">July 20, 2025</small>
                                <strong>New Policy:</strong> Leave application process updated. Refer to "Apply for Leave" section.
                            </li>
                            <li class="list-group-item">
                                <small class="text-muted float-end">July 18, 2025</small>
                                <strong>Important Notice:</strong> Mandatory attendance for all practical sessions this week.
                            </li>
                            {% comment %} Add more dynamic announcements here later {% endcomment %}
                            <li class="list-group-item text-center text-muted">No new announcements.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script>
        feather.replace() // Initialize Feather icons
    </script>
</body>
</html>